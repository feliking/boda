import{a as l,Z as E,f as K,g as q,c as k,r as g,k as O,o as A,h as o,w as U,T as W,i as $,e as d,l as Z,d as G}from"./index.649c84da.js";import{b as S,c as J}from"./QBtn.bd690574.js";import{h as N}from"./dom.0038c44a.js";const V={ratio:[String,Number]};function X(e,a){return l(()=>{const i=Number(e.ratio||(a!==void 0?a.value:void 0));return isNaN(i)!==!0&&i>0?{paddingBottom:`${100/i}%`}:null})}function L(){let e=null;const a=q();function i(){e!==null&&(clearTimeout(e),e=null)}return E(i),K(i),{removeTimeout:i,registerTimeout(n,m){i(),S(a)===!1&&(e=setTimeout(()=>{e=null,n()},m))}}}const Y=1.7778;var ie=k({name:"QImg",props:{...V,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Y},placeholderSrc:String,errorSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(e,{slots:a,emit:i}){const n=g(e.initialRatio),m=X(e,n),f=q(),{registerTimeout:b,removeTimeout:r}=L(),{registerTimeout:T,removeTimeout:w}=L(),_=l(()=>e.placeholderSrc!==void 0?{src:e.placeholderSrc}:null),R=l(()=>e.errorSrc!==void 0?{src:e.errorSrc,__qerror:!0}:null),u=[g(null),g(_.value)],s=g(0),v=g(!1),h=g(!1),B=l(()=>`q-img q-img--${e.noNativeMenu===!0?"no-":""}menu`),F=l(()=>({width:e.width,height:e.height})),I=l(()=>`q-img__image ${e.imgClass!==void 0?e.imgClass+" ":""}q-img__image--with${e.noTransition===!0?"out":""}-transition q-img__image--`),P=l(()=>({...e.imgStyle,objectFit:e.fit,objectPosition:e.position}));function H(){if(w(),e.loadingShowDelay===0){v.value=!0;return}T(()=>{v.value=!0},e.loadingShowDelay)}function C(){w(),v.value=!1}function j({target:t}){S(f)===!1&&(r(),n.value=t.naturalHeight===0?.5:t.naturalWidth/t.naturalHeight,z(t,1))}function z(t,c){c===1e3||S(f)===!0||(t.complete===!0?D(t):b(()=>{z(t,c+1)},50))}function D(t){S(f)!==!0&&(s.value=s.value^1,u[s.value].value=null,C(),t.getAttribute("__qerror")!=="true"&&(h.value=!1),i("load",t.currentSrc||t.src))}function x(t){r(),C(),h.value=!0,u[s.value].value=R.value,u[s.value^1].value=_.value,i("error",t)}function Q(t){const c=u[t].value,y={key:"img_"+t,class:I.value,style:P.value,alt:e.alt,crossorigin:e.crossorigin,decoding:e.decoding,referrerpolicy:e.referrerpolicy,height:e.height,width:e.width,loading:e.loading,fetchpriority:e.fetchpriority,"aria-hidden":"true",draggable:e.draggable,...c};return s.value===t?Object.assign(y,{class:y.class+"current",onLoad:j,onError:x}):y.class+="loaded",o("div",{class:"q-img__container absolute-full",key:"img"+t},o("img",y))}function M(){return v.value===!1?o("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},N(a[h.value===!0?"error":"default"])):o("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},a.loading!==void 0?a.loading():e.noSpinner===!0?void 0:[o(J,{color:e.spinnerColor,size:e.spinnerSize})])}{let t=function(){U(()=>e.src||e.srcset||e.sizes?{src:e.src,srcset:e.srcset,sizes:e.sizes}:null,c=>{r(),h.value=!1,c===null?(C(),u[s.value^1].value=_.value):H(),u[s.value].value=c},{immediate:!0})};O.value===!0?A(t):t()}return()=>{const t=[];return m.value!==null&&t.push(o("div",{key:"filler",style:m.value})),u[0].value!==null&&t.push(Q(0)),u[1].value!==null&&t.push(Q(1)),t.push(o(W,{name:"q-transition--fade"},M)),o("div",{key:"main",class:B.value,style:F.value,role:"img","aria-label":e.alt},t)}}}),ne=k({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:a}){const{proxy:{$q:i}}=q(),n=$(Z,d);if(n===d)return console.error("QPage needs to be a deep child of QLayout"),d;if($(G,d)===d)return console.error("QPage needs to be child of QPageContainer"),d;const f=l(()=>{const r=(n.header.space===!0?n.header.size:0)+(n.footer.space===!0?n.footer.size:0);if(typeof e.styleFn=="function"){const T=n.isContainer.value===!0?n.containerHeight.value:i.screen.height;return e.styleFn(r,T)}return{minHeight:n.isContainer.value===!0?n.containerHeight.value-r+"px":i.screen.height===0?r!==0?`calc(100vh - ${r}px)`:"100vh":i.screen.height-r+"px"}}),b=l(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>o("main",{class:b.value,style:f.value},N(a.default))}});export{ie as Q,ne as a};
